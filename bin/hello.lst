# file opened: main.asm
 1    0000              ; MSX-DOS function codes
 2    0000              _STROUT equ 09h
 3    0000              _CONOUT equ 02h
 4    0000              ; MSX-DOS entry point
 5    0000              BDOS equ 0005h
 6    0000
 7    0000              ; Our program!
 8    0000                  org 0100h
 9    0100 11 1D 01         ld de, TXT_HELLO1
10    0103 0E 09            ld c, _STROUT
11    0105 CD 05 00         call BDOS
12    0108 21 28 01         ld hl, TXT_HELLO2
13    010B CD 0F 01         call PRINT
14    010E C9               ret
15    010F
16    010F              ; PRINT a zero-terminated string in MSX-DOS
17    010F              ; INPUT: HL points to start of string
18    010F              PRINT:
19    010F              ; ASSERT HL>=TXT_HELLO2 && HL<TXT_END
20    010F 7E               ld a, (hl)
21    0110 A7               and a
22    0111 C8               ret z
23    0112                  ;
24    0112 E5               push hl
25    0113 5F               ld e, a
26    0114 0E 02            ld c, _CONOUT
27    0116 CD 05 00         call BDOS
28    0119 E1               pop hl
29    011A                  ;
30    011A 23               inc hl
31    011B 18 F2            jr PRINT
32    011D
33    011D 48 65 6C 6C  TXT_HELLO1 DB "Hello MSX!$"
33    0121 6F 20 4D 53
33    0125 58 21 24
34    0128 0D 0A 44 65  TXT_HELLO2 DB "\r\nDebugging with Dezog",0
34    012C 62 75 67 67
34    0130 69 6E 67 20
34    0134 77 69 74 68
34    0138 20 44 65 7A
34    013C 6F 67 00
35    013F              TXT_END
# file closed: main.asm
